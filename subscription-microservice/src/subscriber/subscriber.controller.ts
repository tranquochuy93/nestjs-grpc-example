import { Controller } from '@nestjs/common';
import { SubscriberService } from './subscriber.service';
import { GrpcMethod } from '@nestjs/microservices';
import { CreateSubscriberDto } from './subscriber.dto';
import { difference } from 'lodash';

@Controller('subscriber')
export class SubscriberController {
  constructor(private readonly subscriberService: SubscriberService) {}

  @GrpcMethod('SubscriberService', 'addSubscriber')
  async addSubscriberGrpcMethod(createSubscriberDto: CreateSubscriberDto) {
    return this.subscriberService.addSubscriber(createSubscriberDto);
  }

  @GrpcMethod('SubscriberService', 'getAllSubscribers')
  async getAllSubscribersGrpcMethod() {
    const arr1 = [
      '093ef18e-3c48-4af7-8408-6996616df299',
      '0a8fda2a-bfa0-4382-bbb1-fb55fcb2641a',
      '0fc5f818-be08-4d0d-b6b4-3bf227b80618',
      '105ee3ca-b85d-45da-99b9-a8a311605893',
      '118f46cb-fe15-4832-9cc3-e80df8ef589c',
      '138ea877-42ab-4d13-80b3-5f9106e38a62',
      '1415e34e-0873-4882-bf10-415005ac3ff9',
      '18a8bb2c-344a-48ac-bc2b-e07328164c3f',
      '1aded142-7cf4-48de-889b-414193ff2e9f',
      '1bc19768-4c52-45c2-8ff8-c8b6dcb93453',
      '1f06b543-0aa4-4262-a950-aae03fe912b6',
      '25b2847f-8fdc-408a-a002-55bc6ac4efe4',
      '2758fca5-aa5a-4af8-99d1-6e81888191f2',
      '2777088d-06b7-4a82-8307-97bf41c0c74c',
      '2934754e-5a90-453c-91f3-6b8f36d60ac3',
      '2a430bd2-7490-4f51-9e63-524587ffa595',
      '2fc6a36a-d2ca-4e6a-b2fb-9bc584849267',
      '39f8e4fc-cd22-4242-88e5-9c154a210c2c',
      '3c4499d7-7bf1-46d8-8edb-6a83a5581454',
      '3d41ddcb-92eb-4940-8713-105be52cd50f',
      '406701b6-c338-4599-8cbd-320eb2edae28',
      '438c751a-6a07-47f6-9d93-6bf91821458e',
      '4ff66e59-b280-41c0-b113-c8514dab713d',
      '557a39e0-8c0d-44b2-8673-83cb47cacf97',
      '559229a0-004b-4844-aa3f-9c01a4d23232',
      '57aaede6-ccb6-4685-9d2f-3d3572ce1f4f',
      '58145255-9a04-414e-bb65-542338dcaa21',
      '59694e36-66f5-4c23-b598-584d4d45bf76',
      '59699be6-99f3-48ce-aedd-26d088f81f28',
      '5e7b75d5-891d-4278-a18a-81a357cbbc72',
      '61459647-7cd4-4c35-bca4-ac2ab48e77ab',
      '63378e12-e39a-4eaf-8338-ceb5cd221266',
      '6ac19be8-1e45-4f68-b6d3-6007421ddfd4',
      '6f55c1fc-ca1d-4e2b-9a06-70167bbe29b3',
      '70cbf9a6-2aec-4da3-a79c-5c5923815353',
      '70ccba19-1cc5-4448-990f-d4de15a5ba24',
      '7226e6f5-d95b-42d3-9c53-6bb1ce4a24cc',
      '773b2a36-a655-4f2e-a24c-991baeac9567',
      '778e510a-710f-4cee-a19f-fe80da4cc8b9',
      '79eeb981-0e01-4ee2-8009-784cad9727ed',
      '7b5daaa9-1ca3-4315-a94b-350dc02aa200',
      '7e7ad5a8-9ae2-4271-80f8-c7ead2e335b1',
      '7fa7e8b4-5057-4e68-b8fb-5e71581f1342',
      '8184ff79-8c5b-4052-890b-36f793572608',
      '848946eb-e234-4ffd-8819-fb82b4153547',
      '848c1e69-3f1b-4154-a7cb-8e945bbc4d8e',
      '87733989-c1b0-4554-9172-77a932736d0d',
      '8c1373ac-3af5-4bd9-b644-cc445015413a',
      '8f58d9a4-ab4a-473a-b792-d9d85b69a820',
      '8faef2b6-e47d-4cbc-b077-5feb38054e45',
      '973c0013-86db-48cb-aff3-7ce07c9f0db8',
      '9b0e82fb-e954-49a0-aded-04aad9013a6e',
      '9dd9b0ae-6fbd-481c-b456-af0cee8f9286',
      'a310f654-59ae-4fbe-9b4c-88a057322843',
      'a87c713b-8427-4ba8-83a6-6f798de25b06',
      'aafbae27-43c4-42ab-91c0-ed00de2e6af9',
      'aba9b304-19ae-4db7-9ea3-d4853f013a25',
      'ad4565ee-24e1-481e-b56d-bd60a8149589',
      'ae7c04ca-78e0-4d76-a092-7f94e0d85eef',
      'af9252b0-cd51-47d0-b5c5-ca7e0ee027e7',
      'b1c1526b-c290-41c2-b237-23f5726e9a21',
      'b22be600-e499-4b86-877e-e847e3089b12',
      'b3b07729-742a-4cca-9034-6a9f5ea6fb86',
      'b3f783b4-e93a-46e6-85e1-11ed1312f0bf',
      'c3a17a06-7523-44c2-8c87-bff761120300',
      'd187e9aa-190a-4e7e-8de1-0565ddeaa443',
      'd2b94996-501b-46b3-a841-5fe99bcdfec1',
      'd3b72183-1463-4f3b-abba-c030717f8680',
      'd4a67d97-f394-491e-90aa-0b731e906670',
      'd7249df0-5e62-4d65-9eec-bce89e1b69da',
      'd8fbd2c1-91e4-4441-b4a8-dc7b634f1c6b',
      'da9a1ac9-8515-47a1-81eb-139309678fe5',
      'dbe5058d-a230-4a37-8a78-4b1710ef75c0',
      'dfb581dc-014b-43a4-a95a-57b26146a34e',
      'e4d28dd6-36c5-42e7-8eb6-61197d9c6c5e',
      'e52312db-8de8-408f-83a2-0b23fbcccabb',
      'e54f7f21-efaa-4b3d-ba0c-5fefc7d93568',
      'e82b20a1-0b33-46ed-b512-f31b692d520e',
      'eaec436c-5964-490d-9f3f-961ed6ae1259',
      'ecaba931-de12-455d-9eaa-16ddd1f025a2',
      'ee6c17bb-2031-4752-8627-e7d76b49001d',
      'ef4ee454-ec8a-4ae7-9433-639bf73a2b68',
      'f2754aa1-a95a-43cd-bea6-ce3e2498b821',
      'f6c914d1-9d02-4da9-b60f-9d32bd0cab93',
      'f7d73c4d-65f6-4261-a90b-934cd16e4ba7',
      'f9ba5d1e-4d92-47d9-a90e-03bf8ef2c60f',
      'fcd5cf21-e9ce-46e5-a2ee-b98af38afbd9',
    ];
    const arr2 = [
      '093ef18e-3c48-4af7-8408-6996616df299',
      '0a8fda2a-bfa0-4382-bbb1-fb55fcb2641a',
      '0fc5f818-be08-4d0d-b6b4-3bf227b80618',
      '105ee3ca-b85d-45da-99b9-a8a311605893',
      '138ea877-42ab-4d13-80b3-5f9106e38a62',
      '1415e34e-0873-4882-bf10-415005ac3ff9',
      '18a8bb2c-344a-48ac-bc2b-e07328164c3f',
      '1aded142-7cf4-48de-889b-414193ff2e9f',
      '1bc19768-4c52-45c2-8ff8-c8b6dcb93453',
      '1f06b543-0aa4-4262-a950-aae03fe912b6',
      '25b2847f-8fdc-408a-a002-55bc6ac4efe4',
      '2758fca5-aa5a-4af8-99d1-6e81888191f2',
      '2777088d-06b7-4a82-8307-97bf41c0c74c',
      '2934754e-5a90-453c-91f3-6b8f36d60ac3',
      '2fc6a36a-d2ca-4e6a-b2fb-9bc584849267',
      '39f8e4fc-cd22-4242-88e5-9c154a210c2c',
      '3c4499d7-7bf1-46d8-8edb-6a83a5581454',
      '3d41ddcb-92eb-4940-8713-105be52cd50f',
      '406701b6-c338-4599-8cbd-320eb2edae28',
      '428ee491-1ca6-426a-84db-f5e70b042d38',
      '438c751a-6a07-47f6-9d93-6bf91821458e',
      '4ff66e59-b280-41c0-b113-c8514dab713d',
      '557a39e0-8c0d-44b2-8673-83cb47cacf97',
      '559229a0-004b-4844-aa3f-9c01a4d23232',
      '57aaede6-ccb6-4685-9d2f-3d3572ce1f4f',
      '58145255-9a04-414e-bb65-542338dcaa21',
      '59694e36-66f5-4c23-b598-584d4d45bf76',
      '59699be6-99f3-48ce-aedd-26d088f81f28',
      '5e7b75d5-891d-4278-a18a-81a357cbbc72',
      '61459647-7cd4-4c35-bca4-ac2ab48e77ab',
      '63378e12-e39a-4eaf-8338-ceb5cd221266',
      '6ac19be8-1e45-4f68-b6d3-6007421ddfd4',
      '6f55c1fc-ca1d-4e2b-9a06-70167bbe29b3',
      '70cbf9a6-2aec-4da3-a79c-5c5923815353',
      '70ccba19-1cc5-4448-990f-d4de15a5ba24',
      '7226e6f5-d95b-42d3-9c53-6bb1ce4a24cc',
      '773b2a36-a655-4f2e-a24c-991baeac9567',
      '7760fe94-3f62-4dbc-9a6c-15d7cd56a060',
      '778e510a-710f-4cee-a19f-fe80da4cc8b9',
      '79eeb981-0e01-4ee2-8009-784cad9727ed',
      '7b5daaa9-1ca3-4315-a94b-350dc02aa200',
      '7e7ad5a8-9ae2-4271-80f8-c7ead2e335b1',
      '7f0c03fd-57d9-41f5-971b-4cb066be9096',
      '7fa7e8b4-5057-4e68-b8fb-5e71581f1342',
      '8184ff79-8c5b-4052-890b-36f793572608',
      '848946eb-e234-4ffd-8819-fb82b4153547',
      '848c1e69-3f1b-4154-a7cb-8e945bbc4d8e',
      '85fddd0c-2ed5-4b3e-b2e4-262cbae1c1bf',
      '87733989-c1b0-4554-9172-77a932736d0d',
      '8bc1183c-825e-419c-85c8-c20d72e488d0',
      '8c1373ac-3af5-4bd9-b644-cc445015413a',
      '8f58d9a4-ab4a-473a-b792-d9d85b69a820',
      '8faef2b6-e47d-4cbc-b077-5feb38054e45',
      '973c0013-86db-48cb-aff3-7ce07c9f0db8',
      '9b0e82fb-e954-49a0-aded-04aad9013a6e',
      '9d24bef5-71c7-44d5-9a2c-4a170f5e3fc5',
      '9dd9b0ae-6fbd-481c-b456-af0cee8f9286',
      'a310f654-59ae-4fbe-9b4c-88a057322843',
      'a87c713b-8427-4ba8-83a6-6f798de25b06',
      'aafbae27-43c4-42ab-91c0-ed00de2e6af9',
      'aba9b304-19ae-4db7-9ea3-d4853f013a25',
      'ad4565ee-24e1-481e-b56d-bd60a8149589',
      'ae7c04ca-78e0-4d76-a092-7f94e0d85eef',
      'af9252b0-cd51-47d0-b5c5-ca7e0ee027e7',
      'b1c1526b-c290-41c2-b237-23f5726e9a21',
      'b22be600-e499-4b86-877e-e847e3089b12',
      'b3b07729-742a-4cca-9034-6a9f5ea6fb86',
      'b3f783b4-e93a-46e6-85e1-11ed1312f0bf',
      'c3a17a06-7523-44c2-8c87-bff761120300',
      'd187e9aa-190a-4e7e-8de1-0565ddeaa443',
      'd3b72183-1463-4f3b-abba-c030717f8680',
      'd4a67d97-f394-491e-90aa-0b731e906670',
      'd7249df0-5e62-4d65-9eec-bce89e1b69da',
      'd8fbd2c1-91e4-4441-b4a8-dc7b634f1c6b',
      'da9a1ac9-8515-47a1-81eb-139309678fe5',
      'dbe5058d-a230-4a37-8a78-4b1710ef75c0',
      'dfb581dc-014b-43a4-a95a-57b26146a34e',
      'e4d28dd6-36c5-42e7-8eb6-61197d9c6c5e',
      'e52312db-8de8-408f-83a2-0b23fbcccabb',
      'e54f7f21-efaa-4b3d-ba0c-5fefc7d93568',
      'e82b20a1-0b33-46ed-b512-f31b692d520e',
      'eaec436c-5964-490d-9f3f-961ed6ae1259',
      'ecaba931-de12-455d-9eaa-16ddd1f025a2',
      'ee6c17bb-2031-4752-8627-e7d76b49001d',
      'ef4ee454-ec8a-4ae7-9433-639bf73a2b68',
      'f2754aa1-a95a-43cd-bea6-ce3e2498b821',
      'f3ee5f28-bf28-4633-94e5-ec4aa3c6fe5f',
      'f6c914d1-9d02-4da9-b60f-9d32bd0cab93',
      'f7d73c4d-65f6-4261-a90b-934cd16e4ba7',
      'f9ba5d1e-4d92-47d9-a90e-03bf8ef2c60f',
      'fcd5cf21-e9ce-46e5-a2ee-b98af38afbd9',
    ];
    console.log(difference(arr1, arr2));
    return {
      data: await this.subscriberService.getAllSubscriber(),
    };
  }

  @GrpcMethod('SubscriberService', 'returnOptionalValue')
  async returnOptionalValue() {
    return {
      id: 1,
    };
  }

  @GrpcMethod('SubscriberService', 'returnNullableValue')
  async returnNullableValue() {
    return { response: undefined };
  }
}
